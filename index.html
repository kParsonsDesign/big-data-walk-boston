<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="script.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body class="p-2">
    <div id="container"></div>
    <div id="fullTable"></div>

    <script src="./boston.js"></script>
    <script>
      const data = bostonData.data;
      const len = bostonData.data.length;
      
      function renderData(bostonData, container) {
        
        data.sort((a,b) => a[18] - b[18]);
        data.reverse();
        //console.log(data);

        function checkEarnings(a) {
          return a[18] < 100000;
        }
        let lastBigEarner = data.findIndex(checkEarnings);
        //console.log(lastBigEarner);

        let html = '';
        for (let i = 0; i < 5; i++) {
          let earning = data[i][18];
          earning = earning.split('');
          earning.splice(3, 0, ',');
          earning = earning.join('');
          html +=
            '<tr class="data">' +
            '<td><strong>' +
            data[i][8].replace(',', ', ') +
            '</strong></td>' +
            '<td>$ ' +
            earning +
            '</td>' +
            '</tr>';
        }
        container.innerHTML =
          '<h2>Boston\'s Top 5 Earners:</h2><table id="topEarners" class="table table-striped"><thead><tr><th>Name</th><th>Total Earned</th></tr></thead><tbody>' +
          html +
          '</tbody></table>';

        container.innerHTML +=
          '<h3 class="mt-5 pt-1">Total Big Earners</h3>' +
          '<p>The number of people working in Boston earning over $100,000 is ' +
          lastBigEarner +
          '.';
/* from NextTech Assignment: 
        function topEarners(a) {
          return a[11] >= 200000;
        }
        let topEmployees = data.filter(topEarners);

        let html2 = '';
        for (let i = 0; i < topEmployees.length; i++) {
          html2 +=
            '<li class="post">' +
            '<h2>' +
            topEmployees[i][8] +
            '</h2>' +
            '<h3>' +
            topEmployees[i][11] +
            '</h3>';
        }

        container.innerHTML += '<h2>Boston\'s Bigest Earners:</h2><ul id="topEmployees">' + html2 + '</ul>';*/
      }
      renderData(bostonData, document.getElementById('container'));

      function renderTable(bostonData) {

      }
      renderTable(bostonData, document.getElementById('fullTable'));
    </script>
  </body>
</html>
